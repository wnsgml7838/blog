<!-- API 엔드포인트 문서화 컴포넌트 -->
<!-- 사용법: {% include api-endpoint.html method="POST" endpoint="/api/users" title="사용자 생성" %} -->

{%- assign method = include.method | upcase -%}
{%- assign endpoint = include.endpoint -%}
{%- assign title = include.title -%}
{%- assign description = include.description -%}
{%- assign auth_required = include.auth_required | default: false -%}
{%- assign rate_limit = include.rate_limit -%}

<div class="api-endpoint-container">
  <div class="api-endpoint-header">
    <div class="api-method-badge method-{{ method | downcase }}">{{ method }}</div>
    <div class="api-endpoint-info">
      <h3 class="api-endpoint-title">{{ title }}</h3>
      <code class="api-endpoint-url">{{ endpoint }}</code>
    </div>
    
    <div class="api-endpoint-meta">
      {% if auth_required %}
        <span class="api-auth-badge" title="인증 필요">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/>
          </svg>
          인증 필요
        </span>
      {% endif %}
      
      {% if rate_limit %}
        <span class="api-rate-limit" title="요청 제한">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C6.47,22 2,17.5 2,12A10,10 0 0,1 12,2M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z"/>
          </svg>
          {{ rate_limit }}
        </span>
      {% endif %}
    </div>
  </div>
  
  {% if description %}
  <div class="api-description">
    <p>{{ description }}</p>
  </div>
  {% endif %}
  
  {% if include.parameters %}
  <div class="api-section">
    <h4>요청 매개변수</h4>
    <div class="api-parameters">
      <table class="api-table">
        <thead>
          <tr>
            <th>매개변수</th>
            <th>타입</th>
            <th>필수</th>
            <th>설명</th>
          </tr>
        </thead>
        <tbody>
          {% for param in include.parameters %}
          <tr>
            <td><code>{{ param.name }}</code></td>
            <td><span class="type-badge">{{ param.type }}</span></td>
            <td>
              {% if param.required %}
                <span class="required-badge">필수</span>
              {% else %}
                <span class="optional-badge">선택</span>
              {% endif %}
            </td>
            <td>{{ param.description }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% endif %}
  
  {% if include.request_example %}
  <div class="api-section">
    <h4>요청 예시</h4>
    {% include code-block.html language="bash" content=include.request_example %}
  </div>
  {% endif %}
  
  {% if include.response_example %}
  <div class="api-section">
    <h4>응답 예시</h4>
    {% include code-block.html language="json" content=include.response_example %}
  </div>
  {% endif %}
  
  {% if include.error_codes %}
  <div class="api-section">
    <h4>오류 코드</h4>
    <div class="api-error-codes">
      {% for error in include.error_codes %}
      <div class="api-error-item">
        <span class="error-code">{{ error.code }}</span>
        <span class="error-message">{{ error.message }}</span>
      </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}
</div>